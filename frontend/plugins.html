<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DevOps-Bot | Plugins Function</title>
  <link rel="stylesheet" href="styles/installation.css">
  <link rel="icon" href="styles/assets/images/favicon-32x32.png" type="image/png">
</head>
<body class="official">
  <!-- Header Toolbar -->
  <header class="toolbar">
    <div class="logo" onclick="navigateHome()">DevOps-Bot</div>
    <nav class="nav-links">
      <a href="officialwebsite.html" class="nav-link" onclick="navigateOfficialWebsite()">Home</a>
      <a href="features.html" class="nav-link">Features</a>
      <a href="docs.html" class="nav-link">Docs</a>
      <a href="Community.html" class="nav-link">Community</a>
      <a href="blog.html" class="nav-link">Blog</a>
      <a href="About.html" class="nav-link">About</a>
    </nav>
    <div class="search-bar">
      <input type="text" id="search-input" placeholder="Search...">
      <button onclick="performSearch()">Search</button>
    </div>
  </header>

  <!-- Sidebar (optional) -->
    <!-- Sidebar (optional) -->
    <aside id="sidebar" class="sidebar" style="background: url('styles/assets/images/sidebar.png') no-repeat center center; background-size: cover;">
        <div class="search-bar">
          <input type="text" id="sidebar-search-input" placeholder="Search..." oninput="showSuggestions()">
          <div id="suggestions" class="suggestions"></div>
          <button onclick="performSidebarSearch()">Search</button>
        </div>
        <ul>
          <li><a href="officialwebsite.html">Introduction</a></li>
          <li>
            <a href="#" onclick="toggleNested(event)">Getting Started</a>
            <ul class="nested">
              <li><a href="installation.html">Installation</a></li>
              <li><a href="uninstall.html">Uninstall</a></li>
              <li><a href="comingsoon.html">Requirements</a></li>
              <li><a href="comingsoon.html">Best Practices</a></li>
              <li>
                <a href="#" onclick="toggleNested(event)">Functions</a>
                <ul class="nested">
                  <li><a href="webhook.html">Webhook</a></li>
                  <li><a href="persona.html">Persona</a></li>
                  <li><a href="infracred.html">Infrascrid</a></li>
                  <li><a href="vault.html">Vault</a></li>
                  <li><a href="plugins.html">Plugins</a></li>
                </ul>
              </li>
              <li>
                <a href="#" onclick="toggleNested(event)">User Interfaces</a>
                <ul class="nested">
                  <li><a href="dob-host-cli.html">Host CLI</a></li>
                  <li><a href="dob-cli.html">Remote CLI</a></li>
                  <li><a href="ui.html">UI</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <a href="#" onclick="toggleNested(event)">Features</a>
            <ul class="nested">
              <li>
                <a href="aws.html" onclick="toggleNested(event)">CI/CD</a>
                <ul class="nested">
                  <li><a href="infracircle.html">InfraCycle</a></li>
                  <li><a href="dobp.html">DOBProxy</a></li>
                </ul>
              </li>
              <li>
                <a href="#" onclick="toggleNested(event)">Provisioning</a>
                <ul class="nested">
                  <li><a href="screenplay.html">Screenplay</a></li>
                </ul>
              </li>                             
              <li>
                <a href="#" onclick="toggleNested(event)">Configuration</a>
                <ul class="nested">
                  <li><a href="infraset.html">InfraSet</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <a href="#" onclick="toggleNested(event)">Providers</a>
            <ul class="nested">
              <li>
                <a href="#" onclick="toggleNested(event)">AWS</a>
                <ul class="nested">
                  <li><a href="aws.html">Configuration</a></li>
                  <li>
                    <a href="#" onclick="toggleNested(event)">Commands</a>
                    <ul class="nested">
                      <li><a href="comingsoon.html">Imperative</a></li>
                      <li><a href="Aws_declartive.html">Declarative</a></li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>
                <a href="#" onclick="toggleNested(event)">Azure</a>
                <ul class="nested">
                  <li><a href="azure.html">Configuration</a></li>
                  <li>
                    <a href="#" onclick="toggleNested(event)">Commands</a>
                    <ul class="nested">
                      <li><a href="comingsoon.html">Imperative</a></li>
                      <li><a href="comingsoon.html">Declarative</a></li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>
                <a href="#" onclick="toggleNested(event)">GCP</a>
                <ul class="nested">
                  <li><a href="gcp.html">Configuration</a></li>
                  <li>
                    <a href="#" onclick="toggleNested(event)">Commands</a>
                    <ul class="nested">
                      <li><a href="comingsoon.html">Imperative</a></li>
                      <li><a href="comingsoon.html">Declarative</a></li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <a href="#" onclick="toggleNested(event)">Third Party Integration Tools</a>
            <ul class="nested">
              <li><a href="ansible.html">Ansible</a></li>
              <li><a href="Kubernetes.html">Kubernetes</a></li>
              <li><a href="dockerswarm.html">Docker Swarm</a></li>
              <li><a href="jenkins.html">Jenkins</a></li>
            </ul>
          </li>
          <li><a href="comingsoon.html">Use Cases</a></li>
          <li><a href="comingsoon.html">API Reference</a></li>
          <li><a href="comingsoon.html">Release Notes</a></li>
        </ul>
      </aside>
  
  <!-- Main Content Area -->
  <main class="main-content">
    <section class="hero" style="background: url('styles/assets/images/back.png') no-repeat center center; background-size: cover;">
      <h1>Plugins Function in InfraSet</h1>
      <p>Welcome to the Plugins Function user guide. This guide provides a comprehensive overview of how to validate, store, install, and execute plugins under the InfraSet functionality. The plugin feature enables extending the capabilities of your InfraSet setup through user-defined or prebuilt plugins.</p>
    </section>

    <section class="docker-swarm">
      <h2>Key Features of the Plugins Function</h2>
      <ul>
        <li><strong>Validation of Plugin Structure:</strong> Ensures plugins follow a required structure (e.g., main.py, requirements.txt).</li>
        <li><strong>Storage of Plugins:</strong> Stores plugins securely in a designated plugin directory.</li>
        <li><strong>Plugin Installation:</strong> Installs dependencies, validates plugins, and compiles them into executables.</li>
        <li><strong>Dynamic Execution:</strong> Executes plugins with dynamic parameters and cloud credentials.</li>
        <li><strong>Cloud Provider Integration:</strong> Supports AWS, GCP, and Azure cloud environments with seamless credential handling.</li>
      </ul>

      <h2>Plugin Workflow</h2>
      <ol>
        <li><strong>Validate Plugin:</strong> Ensure the plugin zip file includes the required files.</li>
        <li><strong>Store Plugin:</strong> Place the plugin in the designated plugin directory for future use.</li>
        <li><strong>Install Plugin:</strong> Extract and compile the plugin into a standalone executable using PyInstaller.</li>
        <li><strong>Execute Plugin:</strong> Dynamically run the plugin with parameters and cloud credentials.</li>
      </ol>

      <h2>Declarative YAML Configuration for Plugins</h2>
      <h3>Example: Declaring a Plugin in YAML</h3>
      <pre><code class="language-yaml">
plugin_management:
  enabled: true
  plugins:
    - name: "example-plugin"
      path: "/path/to/example-plugin.zip"
      </code></pre>

      <h3>Execution</h3>
      <pre><code class="language-bash">
dob infraset screenplay /path/to/infraset.yaml
      </code></pre>

      <h2>Imperative CLI Commands for Plugins</h2>
      <h3>Validate Plugin Structure</h3>
      <p><strong>Command:</strong></p>
      <pre><code class="language-python">
validate_plugin_structure(plugin_zip_path)
      </code></pre>
      <p><strong>Description:</strong> Ensures that the plugin zip file contains the required files, such as main.py.</p>
      <p><strong>Output:</strong> Returns True if valid; otherwise, prints the missing files and returns False.</p>

      <h3>Store Plugin</h3>
      <p><strong>Command:</strong></p>
      <pre><code class="language-python">
store_plugin(plugin_name, plugin_path)
      </code></pre>
      <p><strong>Description:</strong> Validates and stores a plugin in the plugin directory.</p>
      <p><strong>Arguments:</strong></p>
      <ul>
        <li><code>plugin_name</code>: The name of the plugin.</li>
        <li><code>plugin_path</code>: Path to the plugin zip file.</li>
      </ul>
      <p><strong>Example:</strong></p>
      <pre><code class="language-python">
store_plugin("example-plugin", "/path/to/example-plugin.zip")
      </code></pre>

      <h3>Install Plugin</h3>
      <p><strong>Command:</strong></p>
      <pre><code class="language-python">
install_plugin(plugin_name, plugin_zip_path)
      </code></pre>
      <p><strong>Description:</strong> Extracts the plugin, installs dependencies, and compiles it into an executable.</p>
      <p><strong>Arguments:</strong></p>
      <ul>
        <li><code>plugin_name</code>: Name of the plugin.</li>
        <li><code>plugin_zip_path</code>: Path to the plugin zip file.</li>
      </ul>
      <p><strong>Example:</strong></p>
      <pre><code class="language-python">
install_plugin("example-plugin", "/path/to/example-plugin.zip")
      </code></pre>

      <h3>Execute Plugin</h3>
      <p><strong>Command:</strong></p>
      <pre><code class="language-python">
execute_plugin(plugin_path, parameters, provider)
      </code></pre>
      <p><strong>Description:</strong> Executes the plugin binary or script with dynamic parameters and credentials.</p>
      <p><strong>Arguments:</strong></p>
      <ul>
        <li><code>plugin_path</code>: Path to the plugin executable or script.</li>
        <li><code>parameters</code>: Dictionary of parameters to pass to the plugin.</li>
        <li><code>provider</code>: Cloud provider (aws, gcp, or azure).</li>
      </ul>
      <p><strong>Example:</strong></p>
      <pre><code class="language-python">
execute_plugin(
    plugin_path="/path/to/example-plugin",
    parameters={"action": "create", "resource_type": "vm"},
    provider="gcp"
)
      </code></pre>

      <h2>Best Practices</h2>
      <ul>
        <li><strong>Validate Plugin Structure:</strong> Use <code>validate_plugin_structure</code> to ensure plugins adhere to the required structure before storage or execution.</li>
        <li><strong>Secure Plugin Directory:</strong> Protect the <code>PLUGIN_DIRECTORY</code> to avoid unauthorized modifications.</li>
        <li><strong>Handle Credentials Carefully:</strong> Use encrypted credentials where possible and avoid hardcoding sensitive information.</li>
        <li><strong>Test Plugins:</strong> Test plugins locally before deploying them in a production environment.</li>
        <li><strong>Monitor Plugin Output:</strong> Review plugin logs and outputs for errors or unexpected behaviors.</li>
      </ul>

      <h2>Error Handling and Debugging</h2>
      <ul>
        <li><strong>Invalid Zip File:</strong>
          <ul>
            <li><strong>Error:</strong> "Invalid zip file."</li>
            <li><strong>Solution:</strong> Ensure the plugin zip file is valid and contains all required files.</li>
          </ul>
        </li>
        <li><strong>Missing Required Files:</strong>
          <ul>
            <li><strong>Error:</strong> "Missing required file: main.py."</li>
            <li><strong>Solution:</strong> Add the required files to the plugin zip.</li>
          </ul>
        </li>
        <li><strong>PyInstaller Compilation Errors:</strong>
          <ul>
            <li><strong>Error:</strong> "PyInstaller failed."</li>
            <li><strong>Solution:</strong> Check the requirements.txt for any missing dependencies and ensure all imports are handled.</li>
          </ul>
        </li>
        <li><strong>Execution Errors:</strong>
          <ul>
            <li><strong>Error:</strong> "Plugin execution failed with exit code X."</li>
            <li><strong>Solution:</strong> Review the plugin code and ensure the provided parameters are valid.</li>
          </ul>
        </li>
        <li><strong>Credentials Issues:</strong>
          <ul>
            <li><strong>Error:</strong> "Failed to load credentials for provider."</li>
            <li><strong>Solution:</strong> Verify cloud credentials and ensure they are correctly set in the environment.</li>
          </ul>
        </li>
      </ul>

      <h2>Conclusion</h2>
      <p>The Plugins Function in InfraSet is a powerful feature for extending the capabilities of your infrastructure setup. By supporting validation, installation, and execution, it provides a structured approach to managing plugins. Whether you’re creating custom plugins or integrating third-party solutions, this guide ensures a seamless experience.</p>
    </section>
  </main>
  
  <footer class="footer">
    <p>&copy; 2025 DevOps-Bot. All rights reserved.</p>
  </footer>

  <!-- JavaScript Files -->
  <script src="scripts/main.js"></script>
  <script>
    function toggleNested(event) {
      event.preventDefault();
      const parent = event.target.parentElement;
      parent.classList.toggle('active');
    }

    function performSearch() {
      const query = document.getElementById('search-input').value.toLowerCase();
      const links = document.querySelectorAll('.nav-links a, .sidebar a');

      links.forEach(link => {
        if (link.textContent.toLowerCase().includes(query)) {
          link.style.display = 'block';
        } else {
          link.style.display = 'none';
        }
      });
    }

    function navigateHome() {
      window.location.href = 'index.html';
    }

    function navigateOfficialWebsite() {
      window.location.href = 'officialwebsite.html';
    }
  </script>
</body>
</html>
